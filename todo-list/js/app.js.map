{"version":3,"sources":["todoModal.js","todoView.js","todoController.js","appInit.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar ListModal =\n/*#__PURE__*/\nfunction () {\n  function ListModal() {\n    _classCallCheck(this, ListModal);\n\n    this.weatherHistory = {};\n    this.weathersArray = [];\n    this.states = {\n      main: false,\n      modal: false\n    };\n  }\n\n  _createClass(ListModal, [{\n    key: \"getKey\",\n    value: function getKey() {\n      return this.key = 'fcec3450dbf00eb6e012fa3766c6d11d';\n    }\n  }, {\n    key: \"setState\",\n    value: function setState(bind, what) {\n      bind === 'main' && (this.states.main = what);\n      bind === 'modal' && (this.states.modal = what);\n    }\n  }, {\n    key: \"getState\",\n    value: function getState(bind) {\n      if (bind === 'main') return this.states.main;\n      if (bind === 'modal') return this.states.modal;\n    }\n  }, {\n    key: \"getCoords\",\n    value: function getCoords() {\n      fetch('https://get.geojs.io/v1/ip/geo.json').then(function (response) {\n        return response.json();\n      }).then(function (response) {\n        var coords = {\n          latitude: response.latitude,\n          longitude: response.longitude\n        };\n        localStorage.coords = JSON.stringify(coords);\n      });\n    }\n  }, {\n    key: \"getWeather\",\n    value: function getWeather(target, modal, load) {\n      var _this = this;\n\n      var coords = JSON.parse(localStorage.coords);\n      var weatherBox = document.createElement('div');\n      weatherBox.classList.add('weather-box');\n      load.classList.add('center');\n      modal.appendChild(weatherBox);\n      weatherBox.appendChild(load);\n      fetch(\"http://api.openweathermap.org/data/2.5/forecast?lat=\".concat(coords.latitude, \"&lon=\").concat(coords.longitude, \"&APPID=\").concat(this.getKey())).then(function (response) {\n        return response.json();\n      }).then(function (response) {\n        _this.weatherHistory = {};\n        response.list.forEach(function (element) {\n          var date = element.dt_txt.split(' ')[0].split('-').reverse().join().replace(/\\,/g, '.');\n          var time = element.dt_txt.split(' ')[1];\n\n          if (date === target.dataset.date) {\n            _this.weatherHistory[\"\".concat(time)] = \"\".concat(Math.floor(element.main.temp - 273.15), \" C\\xB0\");\n          }\n        });\n      }).then(function () {\n        for (var key in _this.weatherHistory) {\n          if (_this.weatherHistory != {}) {\n            var weatherView = document.createElement('p');\n            weatherView.classList.add('weather');\n            weatherView.innerHTML = \"\".concat(key, \" : \").concat(_this.weatherHistory[key]);\n\n            _this.weathersArray.push(weatherView);\n\n            weatherBox.appendChild(weatherView);\n          }\n        }\n\n        debugger;\n        Todo.checkEmpty(modal);\n        var spinner = document.querySelector('.center').remove();\n        return true;\n      });\n    }\n  }]);\n\n  return ListModal;\n}();\n\nvar Loader =\n/*#__PURE__*/\nfunction () {\n  function Loader() {\n    _classCallCheck(this, Loader);\n\n    this.image = [];\n  }\n\n  _createClass(Loader, [{\n    key: \"loading\",\n    value: function loading(type, srcFile) {\n      if (type === 'image') {\n        var image = new Image();\n        image.src = srcFile;\n        this.image.push(image);\n      }\n    }\n  }]);\n\n  return Loader;\n}();\n\nvar Storage =\n/*#__PURE__*/\nfunction () {\n  function Storage() {\n    _classCallCheck(this, Storage);\n\n    this.arrayList = [];\n    this.lists = [];\n    this.dateArray = [];\n    this.buffer = {};\n    this.timersN = -1;\n    this.number = 0;\n  }\n\n  _createClass(Storage, [{\n    key: \"store\",\n    value: function store(todo) {\n      todo.value && this.arrayList.push(todo.value);\n      localStorage.list = this.arrayList.join();\n      localStorage.newTodo && localStorage.removeItem('newTodo');\n    }\n  }, {\n    key: \"updateStorage\",\n    value: function updateStorage(list, num) {\n      var nums = parseInt(num);\n      var newList = list.filter(function (v) {\n        return v.timer != nums;\n      });\n      localStorage.list = JSON.stringify(newList);\n      return true;\n    }\n  }, {\n    key: \"localeStorageUpdate\",\n    value: function localeStorageUpdate() {\n      !localStorage.timersN && (localStorage.timersN = -1);\n      localStorage.timersN && (localStorage.timersN = ++localStorage.timersN);\n      this.number = localStorage.timersN ? parseInt(localStorage.timersN) : -1;\n      localStorage.setItem('newTodo', this.btnEnter.value);\n      var todo = new todoOne(this.number, localStorage.newTodo);\n      localStorage.list && (this.lists = JSON.parse(localStorage.list));\n      this.lists.push(todo);\n      localStorage.list = JSON.stringify(this.lists, null, '\\t');\n      return this.number;\n    }\n  }, {\n    key: \"dataParser\",\n    value: function dataParser(target) {\n      localStorage.date && (this.buffer = JSON.parse(localStorage.date));\n      var valueButton = target.previousSibling.value.slice(0, 10).split('-').reverse().join().replace(/\\,/g, '.');\n      !localStorage.date && (localStorage.date = JSON.stringify([valueButton]));\n      localStorage.date && this.buffer.push(valueButton);\n      localStorage.date && (localStorage.date = JSON.stringify(this.buffer));\n    }\n  }]);\n\n  return Storage;\n}();\n\nvar todoOne =\n/*#__PURE__*/\nfunction (_ListModal) {\n  _inherits(todoOne, _ListModal);\n\n  function todoOne(timerN, value) {\n    var _this2;\n\n    _classCallCheck(this, todoOne);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(todoOne).call(this));\n    _this2.value = value;\n    _this2.timer = timerN;\n    _this2.save = false;\n    return _this2;\n  }\n\n  return todoOne;\n}(ListModal);","\"use strict\";\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar View = function View(_ref) {\n  var appID = _ref.appID,\n      title = _ref.title;\n\n  _classCallCheck(this, View);\n\n  this.ID = appID;\n  this.title = title;\n};\n\nvar Todo =\n/*#__PURE__*/\nfunction (_View) {\n  _inherits(Todo, _View);\n\n  function Todo(settingsTodo) {\n    var _this;\n\n    _classCallCheck(this, Todo);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Todo).call(this, settingsTodo));\n    _this.prewDate = [];\n    _this.prewTime = [];\n    _this.arrayTodo = [];\n    _this.arrayJSON = [];\n    _this.saveP = [];\n    return _this;\n  }\n\n  _createClass(Todo, [{\n    key: \"spinnerShow\",\n    value: function spinnerShow(modal, load) {\n      var weatherBox = document.createElement('div');\n      weatherBox.classList.add('weather-box');\n      load.classList.add('center');\n      modal.appendChild(weatherBox);\n      weatherBox.appendChild(load);\n    }\n  }, {\n    key: \"build\",\n    value: function build() {\n      var time = new Date().toLocaleDateString().split('.').reverse().join().replace(/\\,/g, '-');\n      var wrapper = document.createElement('div');\n      wrapper.classList.add('wrapper');\n      var footer = document.createElement('div');\n      footer.classList.add('footer');\n      var section = document.createElement('div');\n      section.classList.add('section');\n      var todoList = document.createElement('div');\n      todoList.classList.add('todoList');\n      var titleName = document.createElement('h1');\n      titleName.classList.add('title');\n      titleName.innerHTML = this.title; // let titleTodoList = document.createElement('h3');\n      // titleTodoList.classList.add('todoList__title');\n      // titleTodoList.innerHTML = 'list'.toLocaleUpperCase();\n      // let todoWrapperTitlte = document.createElement('div');\n      // todoWrapperTitlte.classList.add('title');\n\n      var todoControllers = document.createElement('div');\n      todoControllers.classList.add('controllers');\n      var input = document.createElement('input');\n      input.setAttribute('type', 'text');\n      input.setAttribute('maxlength', '110');\n      input.classList.add('getTodo');\n      input.setAttribute('placeholder', 'What should you do?');\n      var button = document.createElement('input');\n      button.setAttribute('type', 'button');\n      button.classList.add('setTodo');\n      button.setAttribute('value', 'ADD');\n      var datePick = document.createElement('input');\n      datePick.classList.add('date');\n      datePick.setAttribute('type', 'date');\n      datePick.setAttribute('value', time); // + `T${new Date().toLocaleTimeString()}`\n\n      footer.appendChild(titleName);\n      todoControllers.appendChild(input);\n      todoControllers.appendChild(datePick);\n      todoControllers.appendChild(button); // todoWrapperTitlte.appendChild(titleTodoList);\n      // todoList.appendChild(todoWrapperTitlte);\n\n      section.appendChild(todoList);\n      wrapper.appendChild(footer);\n      wrapper.appendChild(todoControllers);\n      wrapper.appendChild(section);\n      this.ID.appendChild(wrapper);\n    }\n  }, {\n    key: \"showNewTodo\",\n    value: function showNewTodo(value) {\n      var _this2 = this;\n\n      var here = document.querySelector('.todoList');\n      var oldTodo = document.querySelectorAll('p');\n      var todoList;\n      var dateAdd;\n      this.saveP = [];\n\n      if (oldTodo.length) {\n        oldTodo.forEach(function (element, i) {\n          if (element.classList[0] === 'unactive') {\n            value[i].save = true;\n\n            _this2.saveP.push(oldTodo[i]);\n          }\n\n          element.remove();\n        });\n        ;\n      }\n\n      for (var i = 0; i < value.length; i++) {\n        if (value[i].save && this.saveP[i] && this.saveP[i].classList[0] === 'unactive') {\n          todoList = this.saveP[i];\n        } else {\n          todoList = document.createElement('p');\n\n          if (value[i].save) {\n            todoList.classList.add('unactive');\n          }\n\n          if (todoList.dataset.date === Date.now()) {\n            todoList.classList = [];\n            todoList.classList.add('today');\n          }\n        }\n\n        todoList.setAttribute('draggable', 'true');\n\n        if (localStorage.date) {\n          this.arrayJSON = JSON.parse(localStorage.date);\n          todoList.dataset.date = this.arrayJSON[i];\n          var dateNow = JSON.parse(localStorage.date)[i];\n          var todoDay = new Date(dateNow.split('.').reverse().join().replace(/\\./g, ',')).getTime();\n          var today = new Date(Date.now()).toLocaleDateString();\n\n          if (todoList.dataset.date === today) {\n            todoList.classList.add('today');\n          } else if (todoDay < today) {\n            todoList.classList.add('unactive');\n          }\n        } else if (localStorage.prewDate && localStorage.prewTime) {\n          todoList.dataset.date = JSON.parse(localStorage.prewDate)[i];\n          todoList.dataset.time = JSON.parse(localStorage.prewTime)[i];\n        }\n\n        todoList.dataset.num = i;\n        todoList.innerHTML = value[i].value;\n        here.appendChild(todoList);\n      }\n\n      localStorage.removeItem('newTime');\n      localStorage.removeItem('newTodo');\n      dateAdd && here.insertBefore(dateAdd, here.children[1]);\n    }\n  }, {\n    key: \"showModal\",\n    value: function showModal() {\n      var getList = document.getElementById('todo');\n      var modalBg = document.createElement('div');\n      modalBg.classList.add('background-modal');\n      var modal = document.createElement('div');\n      modal.classList.add('modal-window');\n      modal.dataset.modalNum = this.dataset.num;\n      var closeBtn = document.createElement('input');\n      closeBtn.setAttribute('type', 'button');\n      closeBtn.setAttribute('value', 'X');\n      closeBtn.classList.add('close');\n      var deleteBtn = document.createElement('input');\n      deleteBtn.setAttribute('type', 'button');\n      deleteBtn.setAttribute('value', 'Delete todo');\n      deleteBtn.classList.add('delete');\n      var showTodoDate = document.createElement('p');\n      showTodoDate.classList.add('modal-date');\n      showTodoDate.innerHTML = this.dataset.date;\n      modal.appendChild(closeBtn);\n      modal.appendChild(showTodoDate);\n      modal.appendChild(deleteBtn);\n      modalBg.appendChild(modal);\n      getList.appendChild(modalBg);\n    }\n  }], [{\n    key: \"checkEmpty\",\n    value: function checkEmpty(modal) {\n      debugger;\n      var checkP = document.querySelectorAll('.weather');\n\n      if (checkP.length === 0) {\n        var weatherView = document.createElement('p');\n        weatherView.classList.add('weather');\n        weatherView.innerHTML = \"Weather not found\";\n        modal.appendChild(weatherView);\n      }\n    }\n  }]);\n\n  return Todo;\n}(View);","\"use strict\";\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _construct(Parent, args, Class) { if (isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar TodoControl =\n/*#__PURE__*/\nfunction (_Storage) {\n  _inherits(TodoControl, _Storage);\n\n  function TodoControl(_ref) {\n    var _this;\n\n    var controllerEnter = _ref.controllerEnter,\n        btn = _ref.btn;\n\n    _classCallCheck(this, TodoControl);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TodoControl).call(this));\n    _this.btnEnter = controllerEnter;\n    _this.btnAdd = btn;\n    return _this;\n  }\n\n  _createClass(TodoControl, [{\n    key: \"setLsitener\",\n    value: function setLsitener(todoView, todoState, load) {\n      var _this2 = this;\n\n      var parentDnD = document.getElementsByClassName('todoList')[0];\n\n      var clickEvent = function clickEvent(e) {\n        var target = e.target;\n        var modalWindow = target.parentNode.parentNode;\n        var modal = null;\n\n        if (todoState.getState('main')) {\n          if (target.classList[0] === 'setTodo' && _this2.btnEnter.value) {\n            _this2.buffer = [];\n            _this2.number = _this2.localeStorageUpdate();\n\n            _this2.dataParser(target);\n\n            todoView.showNewTodo(JSON.parse(localStorage.list));\n            _this2.btnEnter.value = '';\n          }\n\n          if (target.dataset.num) {\n            todoView.showModal.call(target);\n            modal = document.querySelector('[data-modal-num]');\n            todoView.spinnerShow(modal, load.image[0]);\n            todoState.getWeather(target, modal, load.image[0]); // todoView.checkEmpty(modal);\n\n            todoState.setState('main', false);\n            todoState.setState('modal', true);\n          }\n        }\n\n        if (todoState.getState('modal')) {\n          if (target.classList[0] === 'close' || target.classList[0] === 'background-modal') {\n            todoState.setState('main', true);\n            todoState.setState('modal', false);\n          }\n\n          target.classList[0] === 'close' && modalWindow.remove();\n          target.classList[0] === 'background-modal' && target.remove();\n\n          if (target.classList[0] === 'delete') {\n            var parent = target.parentNode;\n            var todoDelete = document.querySelector(\"[data-num=\\\"\".concat(parent.dataset.modalNum, \"\\\"]\"));\n            var splits = JSON.parse(localStorage.list);\n            var date = JSON.parse(localStorage.date);\n\n            var count = function count() {\n              splits.forEach(function (element, i) {\n                if (element.timer === parseInt(todoDelete.dataset.num)) return i;\n              });\n            };\n\n            date.splice(count(), 1);\n            localStorage.date = JSON.stringify(date);\n\n            if (splits.some(function (item) {\n              return item.value === todoDelete.innerHTML;\n            })) {\n              var filter = splits.filter(function (v) {\n                return v.value === todoDelete.innerHTML;\n              });\n\n              _this2.updateStorage(JSON.parse(localStorage.list), filter[0].timer);\n\n              todoDelete.remove();\n              todoState.setState('main', true);\n              todoState.setState('modal', false);\n              modalWindow.remove();\n              localStorage.timersN = --localStorage.timersN;\n            }\n\n            var todos = document.querySelectorAll('[data-date]');\n\n            for (var i = 0; i < todos.length; i++) {\n              todos[i].dataset.num && (todos[i].dataset.num = i);\n            }\n          }\n        } // if (e.target.dataset.num) {\n        //     let splits = JSON.parse(localStorage.list);\n        //     let date = JSON.parse(localStorage.date);\n        //     let count = () => {\n        //         splits.forEach((element,i) => {\n        //         if (element.timer === parseInt(e.target.dataset.num)) return i;\n        //     });\n        //     }\n        //     date.splice(count(),1);\n        //     localStorage.date = JSON.stringify(date);\n        //     if (splits.some((item) => item.value === e.target.innerHTML)) {\n        //         let filter = splits.filter((v) => v.value === e.target.innerHTML);\n        //         this.updateStorage(JSON.parse(localStorage.list),filter[0].timer);\n        //         e.target.remove();\n        //         localStorage.timersN = --localStorage.timersN;\n        //     }\n        // }\n\n      };\n\n      document.addEventListener('click', clickEvent, false);\n      document.addEventListener('touchend', clickEvent, false);\n      var drag = null;\n      document.addEventListener('dragstart', function (e) {\n        drag = e.target;\n      });\n      parentDnD.addEventListener('dragover', function (e) {\n        e.preventDefault();\n        var target = e.target;\n        var bounding = target.getBoundingClientRect();\n        var offset = bounding.y + bounding.height / 2;\n\n        if (target.classList[0] != 'todoList') {\n          if (e.clientY - offset > 0) {\n            target.style['border-bottom'] = 'solid 4px red';\n            target.style['border-top'] = '';\n          } else {// target.style['border-top'] = 'solid 4px red';\n            // target.style['border-bottom'] = '';\n          }\n        }\n      });\n      parentDnD.addEventListener('dragleave', function (e) {\n        e.preventDefault();\n        e.target.style['border-bottom'] = '';\n        e.target.style['border-top'] = '';\n      });\n      parentDnD.addEventListener('drop', function (e) {\n        var target = e.target;\n        var swapeDate = JSON.parse(localStorage.date);\n        var swapeList = JSON.parse(localStorage.list);\n\n        if (target.style['border-bottom'] !== '') {\n          target.style['border-bottom'] = '';\n          var dragNum = parseInt(drag.dataset.num);\n          var targetNum = parseInt(target.dataset.num);\n\n          if (dragNum < targetNum) {\n            var swapDate1 = swapeDate.splice(targetNum, 1, swapeDate[dragNum])[0];\n            var swapDate2 = swapeDate[dragNum];\n            swapeDate.splice(targetNum, 0, swapDate1);\n            swapeDate.splice(dragNum, 1);\n            var swapList1 = swapeList.splice(targetNum, 1, swapeList[dragNum])[0];\n            var swapList2 = swapeList[dragNum];\n            swapeList.splice(targetNum, 0, swapList1);\n            swapeList.splice(dragNum, 1);\n            this.insertBefore(drag, target.nextSibling);\n          } else {\n            var _swapDate = swapeDate.splice(targetNum, 1, swapeDate[dragNum])[0];\n            var _swapDate2 = swapeDate[dragNum];\n            swapeDate.splice(targetNum, 0, _swapDate);\n            swapeDate.splice(dragNum + 1, 1);\n            var _swapList = swapeList.splice(targetNum, 1, swapeList[dragNum])[0];\n            var _swapList2 = swapeList[dragNum];\n            swapeList.splice(targetNum, 0, _swapList);\n            swapeList.splice(dragNum + 1, 1);\n            this.insertBefore(drag, target.nextSibling);\n          }\n\n          var todos = document.querySelectorAll('[data-date]');\n\n          for (var i = 0; i < todos.length; i++) {\n            todos[i].dataset.num && (todos[i].dataset.num = i);\n          }\n\n          localStorage.date = JSON.stringify(swapeDate);\n          localStorage.list = JSON.stringify(swapeList);\n        } else {\n          target.style['border-top'] = ''; // let dragNum = parseInt(drag.dataset.num);\n          // let targetNum = parseInt(target.dataset.num);\n          // let swapDate1 = swapeDate.splice(dragNum,1,swapeDate[targetNum-1])[0];\n          // swapeDate.splice(targetNum-1,1,swapDate1);\n          // let swapList1 = swapeList.splice(dragNum,1,swapeList[targetNum-1])[0];\n          // swapeList.splice(targetNum-1,1,swapList1)[0];\n          // this.insertBefore(drag, target);\n          // let todos = document.querySelectorAll('[data-num]');\n          // // for (let i = 0; i < todos.length; i++){\n          // //     (todos[i].dataset.num) && (todos[i].dataset.num = i);\n          // // }\n          // localStorage.date = JSON.stringify(swapeDate);\n          // localStorage.list = JSON.stringify(swapeList);\n        } // this.insertBefore(target,target.previousSibling);\n\n      });\n      window.addEventListener('DOMContentLoaded', function () {\n        localStorage.list && todoView.showNewTodo(JSON.parse(localStorage.list));\n      }, false);\n    }\n  }]);\n\n  return TodoControl;\n}(_wrapNativeSuper(Storage));","\"use strict\";\n\nvar todoApp = function () {\n  function main() {\n    var settingsTodo = {\n      appID: document.getElementById('todo'),\n      title: 'Todo-list'\n    };\n    var load = new Loader();\n    load.loading('image', '../img/spinner.gif');\n    var todoState = new ListModal();\n    todoState.getCoords();\n    todoState.setState('main', true);\n    var storageData = new Storage();\n    var todoView = new Todo(settingsTodo);\n    todoView.build();\n    var controllerSettings = {\n      controllerEnter: document.querySelector('.getTodo'),\n      btn: document.querySelector('.setTodo')\n    };\n    var controller = new TodoControl(controllerSettings);\n    controller.setLsitener(todoView, todoState, load);\n  }\n\n  return {\n    init: main\n  };\n}();\n\ntodoApp.init();"]}